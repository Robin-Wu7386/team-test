<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>AI 中医智能问诊</title>

<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#f4f8f2;
  --panel:#ffffffee;
  --green:#6fbf9a;
  --yellow:#f3e8a5;
  --border:#ddebe2;
  --text:#2e4a3c;
  --muted:#7a9487;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:"Noto Serif SC",serif;
  background:var(--bg);
  color:var(--text);
}

/* Header */
header{
  padding:24px 40px;
  background:rgba(255,255,255,.75);
  backdrop-filter:blur(14px);
  border-bottom:1px solid var(--border);
}

header h2{
  margin:0;
  font-weight:600;
}

/* Main Layout */
.main{
  max-width:1400px;
  margin:40px auto;
  padding:0 24px;
  display:grid;
  grid-template-columns:1fr 1.4fr 1.2fr;
  gap:28px;
}

/* Card */
.card{
  background:var(--panel);
  border-radius:28px;
  padding:28px;
  border:1px solid var(--border);
  box-shadow:0 25px 50px rgba(0,0,0,.08);
  display:flex;
  flex-direction:column;
}

.card h3{
  margin:0 0 6px;
  font-size:20px;
}

.desc{
  font-size:13px;
  color:var(--muted);
  margin-bottom:18px;
}

/* Inputs */
input,textarea{
  width:100%;
  padding:14px;
  border-radius:16px;
  border:1px solid var(--border);
  font-size:14px;
  margin-bottom:14px;
}

textarea{
  resize:none;
  min-height:180px;
  line-height:1.6;
}

/* Button */
button{
  margin-top:auto;
  padding:14px;
  border:none;
  border-radius:999px;
  cursor:pointer;
  background:linear-gradient(135deg,var(--green),var(--yellow));
  font-size:14px;
}

/* Result */
.result{
  white-space:pre-line;
  line-height:1.8;
  font-size:14px;
  color:#456b5a;
  overflow:auto;
}

/* Scroll for result */
.card.result-card{
  max-height:520px;
}
</style>
</head>

<body>

<header>
  <h2>AI 中医智能问诊</h2>
</header>

<div class="main">

  <!-- 左：基本信息 -->
  <div class="card">
    <h3>基本信息</h3>
    <div class="desc">用于辅助体质与证型判断</div>

    <input id="age" placeholder="年龄">
    <input id="gender" placeholder="性别">
    <input id="height" placeholder="身高（cm）">
    <input id="weight" placeholder="体重（kg）">
  </div>

  <!-- 中：症状描述 -->
  <div class="card">
    <h3>症状描述</h3>
    <div class="desc">请尽量详细描述不适感受、持续时间及变化情况</div>

    <textarea id="symptom" placeholder="例如：近两个月容易疲倦，稍微活动就出汗，睡眠浅，多梦，早上起床乏力……"></textarea>

    <textarea id="extra" placeholder="补充情况（饮食、情绪、作息等，可不填）"></textarea>

    <button onclick="submit()">开始分析</button>
  </div>

  <!-- 右：AI 分析 -->
  <div class="card result-card">
    <h3>AI 中医分析</h3>
    <div class="desc">基于中医理论与知识库生成，仅作健康参考</div>

    <div class="result" id="result">
      请填写左侧信息并点击「开始分析」
    </div>
  </div>

</div>

<script>
function submit(){
  const prompt = `
患者基本信息：
年龄：${age.value}；性别：${gender.value}
身高：${height.value}cm；体重：${weight.value}kg

主要症状描述：
${symptom.value}

补充情况：
${extra.value}

请基于中医理论进行辨证分析，
说明可能的证型倾向、分析依据，
并给出调养建议。
`;

  document.getElementById("result").innerText="分析中……";

  fetch("http://127.0.0.1:5000/ask",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({ question: prompt })
  })
  .then(r=>r.json())
  .then(d=>{
    document.getElementById("result").innerText = d.answer;
  });
}
</script>

</body>
</html>
